<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>shell on Notes by Grayside</title><link>https://notes.grayside.dev/tags/shell/</link><description>Recent content in shell on Notes by Grayside</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright 2023 Adam Ross</copyright><lastBuildDate>Tue, 31 Jan 2023 10:25:51 -0800</lastBuildDate><docs>https://validator.w3.org/feed/docs/rss2.html</docs><ttl>1440</ttl><skipHours><hour>7</hour><hour>8</hour><hour>9</hour><hour>10</hour><hour>11</hour><hour>12</hour><hour>13</hour><hour>14</hour><hour>15</hour></skipHours><atom:link href="https://notes.grayside.dev/tags/shell/index.xml" rel="self" type="application/rss+xml"/><item><title>GitHub Actions: 'tee' is for Environment Variables</title><link>https://notes.grayside.dev/posts/tools/gha-env-vars/</link><pubDate>Tue, 31 Jan 2023 10:25:51 -0800</pubDate><guid>https://notes.grayside.dev/posts/tools/gha-env-vars/</guid><description>&lt;p>In 2020 GitHub changed the recommended practice for dynamically setting environment
variables because of a security vulnerability: &lt;a href="https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/">GitHub Actions: Deprecating set-env and add-path commands
&lt;/a>&lt;/p>
&lt;p>I missed this until I noticed console warnings.&lt;/p>
&lt;p>However, sometimes I like to check the environment variable I&amp;rsquo;ve just set, and
this model of piping to a file inspired me.&lt;/p>
&lt;p>Instead of a simple append operation:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">Set Environment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">run&lt;/span>: &lt;span style="color:#ae81ff">echo &amp;#34;MY_VARIABLE=${PWD}/cool/data/path&amp;#34; &amp;gt;&amp;gt; $GITHUB_ENV&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>You can both append and see the result by using &lt;code>tee -a&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">Set Environment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">run&lt;/span>: &lt;span style="color:#ae81ff">echo &amp;#34;MY_VARIABLE=${PWD}/cool/data/path&amp;#34; | tee -a $GITHUB_ENV&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description><category>til</category><category>gha</category><category>testing</category><category>environment</category><category>shell</category></item></channel></rss>