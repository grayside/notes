<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>hugo on Notes by Grayside</title><link>https://notes.grayside.dev/tags/hugo/</link><description>Recent content in hugo on Notes by Grayside</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Copyright 2023 Adam Ross</copyright><lastBuildDate>Sat, 27 Jan 2024 20:07:57 +0000</lastBuildDate><docs>https://validator.w3.org/feed/docs/rss2.html</docs><ttl>1440</ttl><skipHours><hour>7</hour><hour>8</hour><hour>9</hour><hour>10</hour><hour>11</hour><hour>12</hour><hour>13</hour><hour>14</hour><hour>15</hour></skipHours><atom:link href="https://notes.grayside.dev/tags/hugo/index.xml" rel="self" type="application/rss+xml"/><item><title>Configuring Hugo Base URL in Codespaces</title><link>https://notes.grayside.dev/posts/tools/hugo-base-url-in-codespaces/</link><pubDate>Sat, 27 Jan 2024 20:07:57 +0000</pubDate><guid>https://notes.grayside.dev/posts/tools/hugo-base-url-in-codespaces/</guid><description>&lt;p>Learning about &lt;a href="https://docs.github.com/en/codespaces/overview">Codespaces&lt;/a>,
and more specifically, &lt;a href="https://gohugo.io/">Hugo&lt;/a> and &lt;a href="https://taskfile.dev">Taskfile&lt;/a>
in Codespaces.&lt;/p>
&lt;p>My theme&amp;rsquo;s starter gave me a devcontainer based on the (now archived)
&lt;a href="https://github.com/microsoft/vscode-dev-containers/blob/main/containers/hugo">community devcontainer for Hugo&lt;/a>.&lt;/p>
&lt;p>Running inside the codespace defined by this container, running &lt;code>hugo serve&lt;/code>
with the Codespaces port forwarding works well. However, when run this way,
Hugo hasn&amp;rsquo;t been configured with the correct base URL which could break
functionality dependent on the full URL, such as validating RSS or
single-origin scripts.&lt;/p>
&lt;h2 id="setting-the-right-base-url-in-codespace-dev">Setting the right base URL in codespace dev&lt;/h2>
&lt;p>Some quick research found an
&lt;a href="https://github.com/shotor/hugo-codespaces-example?tab=readme-ov-file#debug-on-codespaces">example repository&lt;/a>
with a README that provided the tweaks needed for the hugo command:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>hugo server --baseUrl &lt;span style="color:#e6db74">&amp;#34;https://{githubUrl}&amp;#34;&lt;/span> --appendPort&lt;span style="color:#f92672">=&lt;/span>false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>How do you get &lt;code>githubUrl&lt;/code>?&lt;/p>
&lt;p>There are a couple methods for this, such as going to the browser preview tab
and copying the base URL. Pulling that into your codespace terminal, that might look like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>githubUrl&lt;span style="color:#f92672">=&lt;/span>stellar-codespace-id-sn2ggl3bl4rn3y-1313.app.github.dev
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>hugo server --baseUrl &lt;span style="color:#e6db74">&amp;#34;https://{githubUrl}&amp;#34;&lt;/span> --appendPort&lt;span style="color:#f92672">=&lt;/span>false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>However, that&amp;rsquo;s a manual step that&amp;rsquo;s needed almost per work session.&lt;/p>
&lt;h2 id="zero-config-version">Zero Config Version&lt;/h2>
&lt;p>Inspecting the terminal environment of the codespace, it turns out the pieces
of the codespace domain are available via built-in environment variables:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>app.github.dev&lt;/strong> is sourced from &lt;code>GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN&lt;/code>&lt;/li>
&lt;li>&lt;strong>stellar-codespace-id-sn2ggl3bl4rn3y&lt;/strong> is sourced from &lt;code>CODESPACE_NAME&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Leaning on these variables, we can simplify the command to something with zero
additional configuration:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>hugo server --baseURL &lt;span style="color:#e6db74">&amp;#34;https://&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>CODESPACE_NAME&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">-1313.&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> --appendPort&lt;span style="color:#f92672">=&lt;/span>false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Note the browser preview on this command injects the port as part of the domain, it ends up looking like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>https://&lt;span style="color:#e6db74">${&lt;/span>CODESPACE_NAME&lt;span style="color:#e6db74">}&lt;/span>-1313.&lt;span style="color:#e6db74">${&lt;/span>GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN&lt;span style="color:#e6db74">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Where 1313 is the hugo server default port.&lt;/p>
&lt;h2 id="bringing-this-to-taskfile">Bringing this to Taskfile&lt;/h2>
&lt;p>I’ve started exploring the use of &lt;a href="http://taskfile.dev">taskfile.dev&lt;/a> for task management,
and an adaptation of this command might look like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>version: &lt;span style="color:#e6db74">&amp;#39;3&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tasks:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cs-serve:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cmds:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hugo server --appendPort&lt;span style="color:#f92672">=&lt;/span>false --baseURL &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> &lt;span style="color:#e6db74">&amp;#34;https://{{ .CODESPACE_NAME }}-1313.{{ .GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> requires:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> vars: &lt;span style="color:#f92672">[&lt;/span>CODESPACE_NAME, GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Rather than make &lt;a href="https://taskfile.dev/usage/#env-files">direct use of environment variables&lt;/a>,
I’m using &lt;a href="https://taskfile.dev/usage/#variables">taskfile variables&lt;/a>
that inherit values from the environment. This way I can make these special
codespace environment variables required before execution without adding
more complex shell code.&lt;/p></description><category>til</category><category>codespaces</category><category>hugo</category><category>shell</category><category>taskfile</category></item><item><title>Planning notes.grayside.dev</title><link>https://notes.grayside.dev/posts/this/site/</link><pubDate>Wed, 01 Feb 2023 10:56:54 -0800</pubDate><guid>https://notes.grayside.dev/posts/this/site/</guid><description>&lt;p>I&amp;rsquo;ve wanted to restart my tech blogging practice for several years. I have been
blocked multiple times by my own perfectionism: I tend to choose a path that
involves customizing the tools, get a backlog of &amp;ldquo;critical tasks&amp;rdquo;, then get
distracted before launching.&lt;/p>
&lt;p>This time I defined a very minimal scope, launched a site with one post, and then
began improving it. The next challenge is feeling ready to broadly share links.&lt;/p>
&lt;h2 id="objective">Objective&lt;/h2>
&lt;p>Build a practice of writing things down, and sharing. Get in more discussions.&lt;/p>
&lt;h2 id="non-goals">Non-goals&lt;/h2>
&lt;p>Produce perfectly polished posts presenting proof of professional potential.
(I&amp;rsquo;ll launch a separate site for that if I find time to write that way.)&lt;/p>
&lt;p>Measure things.&lt;/p>
&lt;h2 id="mvp">MVP&lt;/h2>
&lt;ul>
&lt;li>Easily write, publish and link to posts&lt;/li>
&lt;li>See lists of all posts, optionally broken down by tags&lt;/li>
&lt;li>An RSS feed lets other people read my posts the way I prefer to read theirs&lt;/li>
&lt;li>Site aesthetic has some personality&lt;/li>
&lt;li>If folks like the content, they can find me on Mastodon to start a good chat&lt;/li>
&lt;/ul>
&lt;h2 id="categories">Categories&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>Hosting:&lt;/strong> Where will the site &amp;amp; code live?&lt;/li>
&lt;li>&lt;strong>Appearance:&lt;/strong> What does it look like, what does the site say about my &amp;ldquo;brand&amp;rdquo;?
What&amp;rsquo;s the quirkiness level between the inside of my head and a business card?&lt;/li>
&lt;li>&lt;strong>Maintenance:&lt;/strong> What will be involved in keeping this live?&lt;/li>
&lt;li>&lt;strong>Content creation experience:&lt;/strong> How will I create and update content?&lt;/li>
&lt;li>&lt;strong>Data:&lt;/strong> How will I back up data? Do I want to make it available for integrations?
Will having more structured data in front matter be worthwhile?&lt;/li>
&lt;/ul>
&lt;h2 id="maintenance--lifecycle-considerations">Maintenance &amp;amp; Lifecycle considerations&lt;/h2>
&lt;ul>
&lt;li>Bursty Attention&lt;/li>
&lt;li>Long-term site (5-10? years)&lt;/li>
&lt;li>Long-term data (forever)&lt;/li>
&lt;li>Minimal tools &amp;amp; expenses&lt;/li>
&lt;li>Durable automation&lt;/li>
&lt;li>Simplicity&lt;/li>
&lt;/ul>
&lt;h2 id="site-architecture--tooling">Site architecture &amp;amp; tooling&lt;/h2>
&lt;p>I chose to use &lt;a href="https://gohugo.io">Hugo&lt;/a> as a static site generation tool.&lt;/p>
&lt;ul>
&lt;li>As a tool shipped as a binary, it&amp;rsquo;s likely to continue working to some extent
even if maintenance stops&lt;/li>
&lt;li>As a Go-based tool, I&amp;rsquo;m familiar with the templating, language, and ecosystem
such that I will be comfortable customizing site behaviors or contributing to
the community.&lt;/li>
&lt;li>&lt;code>hugo serve&lt;/code> is a nice development experience&lt;/li>
&lt;/ul>
&lt;p>I&amp;rsquo;m using GitHub to host my code because I live there.&lt;/p>
&lt;p>I&amp;rsquo;m using GitHub Pages to host my site:&lt;/p>
&lt;ul>
&lt;li>Keep number of vendors/dependencies minimal&lt;/li>
&lt;li>Avoid managing hardware&lt;/li>
&lt;li>Already familiar with using GitHub Workflows to work with GitHub Pages&lt;/li>
&lt;/ul>
&lt;h2 id="deploying-content">Deploying content&lt;/h2>
&lt;p>As a static site, the critical day to day use case is creating and publishing
content&lt;/p>
&lt;p>git commit / git push is a very simple deploy model that I&amp;rsquo;m used to with code.
Extending it to content is natural.&lt;/p>
&lt;p>The downside of this is using GitHub on my phone to author new content is not a
great experience. I might want to consider if there is a good app that streamlines
content creation backed by GitHub. It may also be interesting to see if I could
publish from a &lt;a href="https://notion.so">Notion&lt;/a> workspace.&lt;/p>
&lt;h2 id="choosing-a-theme-and-evaluating-customizations">Choosing a Theme and Evaluating Customizations&lt;/h2>
&lt;p>For this site, I decided to present my identity as a coder and have more fun with
the look. I don&amp;rsquo;t anticipate posting links to it in LinkedIn or trying to impress
employers. I&amp;rsquo;m hoping to start discussions with other techies.&lt;/p>
&lt;p>I found the &lt;a href="https://themes.gohugo.io/themes/hugo-theme-terminal/">terminal theme&lt;/a>
in the &lt;a href="https://themes.gohugo.io/">hugo theme gallery&lt;/a> and made a few changes:&lt;/p>
&lt;ul>
&lt;li>I used the theme&amp;rsquo;s built-in mechanism for customizations to add my own styling&lt;/li>
&lt;li>I completely overrode the theme&amp;rsquo;s RSS template and I&amp;rsquo;m okay with that!&lt;/li>
&lt;/ul>
&lt;p>In general this theme is good. So far I&amp;rsquo;ve noticed a few drawbacks:&lt;/p>
&lt;ul>
&lt;li>It doesn&amp;rsquo;t produce semantic HTML5 markup&lt;/li>
&lt;li>It&amp;rsquo;s got some accessibility and web performance optimization opportunities&lt;/li>
&lt;li>A couple of the templates could be decomposed into more targeted partial templates
for ease of customization&lt;/li>
&lt;/ul>
&lt;p>I&amp;rsquo;m avoiding customizing the theme templates because I&amp;rsquo;d really prefer to inherit
improvements from upstream. I&amp;rsquo;m currently watching the repository to see if
community Pull Requests are accepted.&lt;/p>
&lt;h2 id="what-if-the-tools-go-away">What if the tools go away?&lt;/h2>
&lt;ul>
&lt;li>Backup the site with git clone&lt;/li>
&lt;li>Switch the theme to many others others in Hugo, possibly set some overrides in
configuration or frontmatter to line up with design choices&lt;/li>
&lt;li>Switch from hugo to other static site generator: markdown with yaml front matter
is a pretty common format and if some of the data model isn&amp;rsquo;t supported the
migration model can be &amp;ldquo;Search and Replace&amp;rdquo;&lt;/li>
&lt;/ul></description><category>decisions</category><category>website</category><category>static-site-generator</category><category>hugo</category><category>notes.grayside.dev</category></item></channel></rss>